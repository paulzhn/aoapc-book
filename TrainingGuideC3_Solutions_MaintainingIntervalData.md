#《算法竞赛入门经典——训练指南》第三章 区间信息维护 习题题解

提示：以下题解可以用于任何非盈利用途，但请注明出处，一是尊重作者的劳动，二是让更多的人知道这个题解的存在，大家共同维护 :)

如果你想contribute的话，直接以留言或者email的形式把题解发给我们，或者先写一篇长长的blog，再告知链接 :)

## LA2191(UVa12086) 电位器(Potentiometers) ##

[题目大意]

参见训练指南相应习题部分。

[分析]

(by 陈锋)

直接套用树状数组的逻辑即可。

## LA4730(UVa1455) 王国(Kingdom) ##

[题目大意]

参见训练指南相应习题部分。

[分析]

(by 陈锋)

首先观察容易得到：对于覆盖的y区间是[m, n]的一个州来说，如果m < n，所有穿过它的水平线的y值的区间就是[m.5, (n-1).5]
用类似并査集的结构来维护所有城市的集合(州)，每一个州要维护其中城市的y坐标的边界值minY和maxY以及集合中元素(城市)的个数。
对于所有的y.5对应的水平线来说，它们穿过的州的数量用一个数组S[.md](.md)记录，城市的数量用数组C[.md](.md)记录。每一次connect操作都会把现有的两个州连起来，然后影响到S和C中，这两个州的y区间[minY，maxY]对应的[minY, maxY-1]区间信息，我们分别用用两个线段树来分别维护数组S和C的sum信息：tree1和tree2。
对于connect A, B的操作，要考虑忽略A,B已经在同一个集合内的情况。然后就是操作tree1和tree2相应区间内的城市和州的数量，详见代码。