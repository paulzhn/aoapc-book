#《算法竞赛入门经典——训练指南》第二章组合游戏部分习题简要题解

提示：以下题解可以用于任何非盈利用途，但请注明出处，一是尊重作者的劳动，二是让更多的人知道这个题解的存在，大家共同维护 :)

如果你想contribute的话，直接以留言或者email的形式把题解发给我们，或者先写一篇长长的blog，再告知链接 :)

# 组合游戏 （Combinatorial Games） #

## UVa847 乘法游戏(A multiplication game) ##

[题目大意]

Stan和Olli要玩儿一个乘法游戏，每次在整数p的基础上乘以一个2~9之间的整数。开始的时候p=1，Stan先玩儿，之后轮流的乘。游戏开始之前，他们定下一个整数1 < n < 4294967295作为目标，谁先把p乘到≥n就算赢。

[分析]

(by 陈锋)

首先使用简单的地推方法来计算看看使得先手必胜的n的值，就自然发现在以下的区间内的n先手必败：
[10, 18],[163,324],[2917,5832] ...
这样可以总结出的规律是[x1, x1×2  -2], [x2, x2×2 - 2]...[xi, xi×2 - 2]。其中xi = 3<sup>(i×2)</sup> × 2<sup>(i-1)</sup> + 1。这样的话，对于输入的n直接判断是否落在必败的区间即可。

## UVa10165 拿石头游戏(Stone Game) ##

[题目大意]

Jack和Jim玩一种有趣的拿石头游戏。一开始时有N堆石头，各堆有Pi个石头（i=1..N, 1 <= P i <= 2`*`10^9）。他们轮流拿一些石头。拿的规则如下：一次仅能选择一堆石头，然后拿走任一数目的石头（最少一个，最多拿全部）。如此轮流下去，拿到最后一颗石头的人就是赢家。游戏开始时Jack先拿，然后才是Jim。现在请你帮助Jack判断面对一开始的石头堆，他是否一定能赢。

[分析]

(by 陈锋)

这是一个简单的n堆的Nim游戏，直接套用L.Bouton定理即可。

## UVa 12293 盒子游戏(Box Game) ##

[题目大意]

有两个相同的盒子，其中一个盒子有n个球，另一个盒子有1个球。Alice和Bob两人轮流操作，每次清空球较少的那个盒子(如果球数相同，任意清空一个)，然后从另一个盒子里拿些球到这个空盒子中，使得操作后两个盒子都至少有一个球。如果无法操作(当且仅当两个盒子都只有1个球时)，则当前游戏者输。输入n(n <= 10^9)，你的任务是判断先手还是后手胜。

[分析]

(by 陈锋)

首先使用直接模拟的方法来观察胜负与球数较多的那个盒子中的球数n之间的规律(这里球数较少的盒子里面的球数是无所谓的)，n的后续状态就是 [n/2 + n%2, n-1]中的数。经过模拟可以发现只有在n = 2^x - 1(x >= 1)的时候先手必败。

## UVa11927 重要游戏(Games Are Important) ##

[题目大意]

有一个DAG(有向五环图)，每个结点上都有一些石子。两个玩家轮流把一个石头从一个结点沿着从此点出发的任意一条有向边移向相邻结点。不能移动的玩家算输掉游戏。注意，在同一个时刻一个节点上可以有任意的石头。

[分析]

(by 陈锋)

注意到，各个石头的状态的是完全独立的，所以这个游戏可以看做每个石头所形成的游戏的和。对于每一个石头，它的状态x就是所在的结点编号，如果此结点已经没有出发的边，则既是先手必败的状态，否则后续状态就是相邻结点的SG值集合。

需要注意的是，对于在同一个结点来说，其上的石头如果个数为奇数，则当成1个石头即可；如果为偶数，可以忽略不计。这是由异或运算的性质决定的。