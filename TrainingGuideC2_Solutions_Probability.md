#《算法竞赛入门经典——训练指南》第二章概率部分习题简要题解

提示：以下题解可以用于任何非盈利用途，但请注明出处，一是尊重作者的劳动，二是让更多的人知道这个题解的存在，大家共同维护 :)

如果你想contribute的话，直接以留言或者email的形式把题解发给我们，或者先写一篇长长的blog，再告知链接 :)

# 概率 （Probability） #

## UVa 10491 牛和车（Cows and Cars） ##

[题目大意]

有这么一个电视节目，面前有3个门。两个里面是牛；另外一个藏着你的奖品-一个轿车。
在你选择了一个门之后，打开门之前。主持人会给个提示，通过打开隐藏有牛的那个门(不会打开你已经选择的那个门，即使里面是牛)。你接着可以选择是保持现有的选择，还是换成另外一个未开的门。你会把你最后打开的门后面的东西赢走。

在这个例子里面，你能赢到车的概率是2/3(很难相信)，假设你总是在主持人给你机会之后改变自己的选择。2/3这个数的逻辑是这样的：如果你选择了2个牛之一，你肯定能换到车前面的门，因为主持人已经让你看了另外一个牛。如果你开始选择的就是车，那就换成剩下的牛并且输掉奖品。所以，2/3的情况你能切换到那个车。

现在，你需要对更通用的问题计算出赢到车的概率：
  1. 牛的数量是可变的
  1. 车的数量可变(牛的数量+车的数量=门的总数)
  1. 主持人帮你打开的隐藏牛的门的数量可变(在给你机会改变选择的时候，几个门仍然会打开)
你可以假设，在主持人把一些后面是牛的门打开之后，每次你都决定换到剩下任意一个未开的门里面。

[分析]

(by 陈锋)

考虑两种可能：
(1) 一开始选了牛，那么接下来在所有的门打开之后能选到车的概率为ncows / (ncars + ncows) × ncars / (ncows - nshow - 1 + ncars)
(2) 一开始选了车, 在牛门打开之后，仍然能选到车的概率为ncars/ (ncars + ncows) × (ncars - 1) / (ncows - nshow + ncars -1)
两个加起来就OK。

## UVa 10759 扔骰子(Dice Throwing) ##

[题目大意]

扔n个普通的立方体骰子。所有骰子的和大于等于x的概率是多少。

[分析]

(by 陈锋)

令S(n,x)为扔n个骰子，所有可能出现和为x的方案数。则S(n,x) = ∑S(n-1, x-i), i∈`[`1,6] 终结条件为
```
if x < n, return 0;
if(n == 1) return x == 1 ... 6 ? 1 : 0
```
普通的DP问题。所求的答案就是 ∑S(n, i)/6n, i ∈ `[`x, 6n]，约分都除去gcd即可。

## UVa 11181 给定概率(Probability Given) ##

[题目大意]

N个人一起去买东西。他们可能买东西的概率分别是P1, P2, P3,…PN。现在你知道它们之中的r个人买东西了，剩下的人啥也没买。现在要计算出它们每个人可能买东西的概率。

[分析]

(by 陈锋)

定义P(i)为第i个人已经买东西的概率。当第i个人买东西的时候，同时发生的事情还有另外r-1个人也买东西了。
遍历所有1...N的大小为r的子集s: 则r个人买东西这个事情发生的概率是：
```
P(s) = ∏P(k) * ∏(1 - P(k')), k ∈s, k' ∉ s
于是有： P(i) = (∑P(s) ,i ∈ s)/∑P(s)
```
所以对于每一组N和r，首先要把所有的s(用bitset表示)和P(s)求出来。之后就可以对于所有的i，套上面的公式了。