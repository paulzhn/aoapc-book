#《算法竞赛入门经典——训练指南》第二章基础习题简要题解

提示：以下题解可以用于任何非盈利用途，但请注明出处，一是尊重作者的劳动，二是让更多的人知道这个题解的存在，大家共同维护 :)

如果你想contribute的话，直接以留言或者email的形式把题解发给我们，或者先写一篇长长的blog，再告知链接 :)

# 基础问题 (Basic Problems) #

## UVa 11444 求和(Sum) ##

[题目大意]

有一个长度为n的序列：seq`[`i] (i = 1 to n)。考虑一个函数：F(k,a,b) =  ∑seq`[`i]×(i-a+1)k , i ∈`[`a,b]。
给出一个长度为n的序列，现在需要计算F(k, a, b)。

[分析]

(by 陈锋)

F(k,a,b) =  ∑seq`[`i]×(i-a+1)<sup>k</sup> , i ∈`[`a,b]
= ∑seq`[`i] × (C(k,k)×i<sup>k</sup> + C(k,k-1)×i<sup>(k-1)</sup>×(1-a) + ... + C(k, 1)×i×(1-a)<sup>(k-1)</sup>+C(k, k) ×(1-a)<sup>k</sup>)
=  C(k,0)×∑seq`[`i]×i<sup>k</sup> + C(k,1)×(1-a) ×∑seq`[`i]×i<sup>(k-1)</sup>+ ... +C(k,x) × (1-a)x×∑seq`[`i]×i<sup>(k-x)</sup>+...

令S(n, k) = ∑seq`[`i]×i<sup>k</sup>, i = 1 to n
则F(k,a,b) = C(k,0) × (S(b, k) - S(a-1, k)) + C(k,1) × (1-a)(S(b,k-1) - S(a-1, k-1))
+ ... + C(k, x) × (1-a)<sup>x</sup> × (S(b, k-1) - S(a-1, k - 1))

S(n,k)是一个二维数组可以一次填出来。

## UVa 11752 超级幂(The Super Powers) ##

[题目大意]

如果一个数是至少两个不同的正整数的幂，那么我们称它为超级幂。比如64就是，因为64 = 8<sup>2</sup> 并且 64 =  4<sup>3</sup>。
现在写个程序列出所有1到2<sup>64</sup> -1之间的所有超级幂。

[分析]

(by 陈锋)

对所有的数字，所有的指数为合数的幂极为超级幂。筛选法算结果即可。注意排序去掉重复的。

# 组合计数 （Counting） #

## UVa11038 有多少个0(How Many 0's?) ##

[题目大意]

输入两个非负整数m和n（m<=n<231），求：把m到n的所有整数写出来，一共要写多少个数字0？

[分析]

(by 陈锋)

令f(x)为求0~x之间0的个数有多少，即可将题目换化成[m,n]之间0的个数=f(n)-f(m-1)。
我们将x分为各个位数去用排列组合的方式算其出现0的个数，假设x从右数第k位数为xk，整个x可以看做left xk right三个数字拼出来的。
若xk!=0，<= x的数字中 第k位数出现0的情况就会是 left×10<sup>k</sup>。
而xk==0，第k位数出现0的情况就会是(left-1)×10<sup>k</sup> + right + 1。把每个位数上的数字依照上述公式算出总和再加上会忽略掉的0即是f(x)。

## UVa10883 超级平均数(Supermean) ##

[题目大意]

给出n(n≤50000)个数，每相邻两个数求平均数，将得到n-1个数。这n-1个数每相邻两个数求平均数，将得到n-2个数。依此类推，最后得到1个数。求这个数。

[分析]

(by 陈锋)

简单计算不难发现对于输入的x1 x2 ... xn，连续计算之后，各个xi的系数实际上形成一个杨辉三角，也就是说最终答案是(Σxi `*` C(n, i)) / (2<sup>n-1</sup>)。因为分子分母里面的系数都太大，直接计算必然会溢出，所以可以先求对数，再求exp。这里需要特别注意的是，输入的数字有可能是负数或者0，在求对数的时候需要进行特殊处理。

## Uva1510 霓虹灯广告牌 (LA5846)(Neon Sign) ##

[题目大意]

圆周上有n(3<=n<=1000)个点，两两相连，只能涂红色或蓝色。求单色三角形(即三条边的颜色相同的三角形)的个数。

[分析]

(by 陈锋)

参考训练指南2.1节问题6的思路，先根据输入求出所有异色三角形的个数sum，然后最终的答案就是C(N,3) - sum/2.

## UVa10079 切匹萨(Pizza Cutting) ##

[题目大意]

给你一块Pizza，如果切一刀可以切成2块，切2刀最多可切成4块，切3刀最多可切成7块（如下图），那切N刀最多可以切成几块呢？

[分析]

(by 陈锋)

已经切了n刀之后，切第n+1刀的时候呢，就要第n+1刀对应的直线能和之前的n刀全部相交。
递推公式为  f(0)=1; f(n)=f(n-1)+n (n>=1); 即：f(n)=(n\*n+n)/2+1  (n>=0);

## UVa10081 紧致单词(Tight words) ##

[题目大意]

给出一个字母表 {0, 1, ... , k}, 0 <= k <= 9。如果其中任意相邻的两位的差都不超过1，我们说一个长度为n的单词是紧致的。对于两个整数(k，n)，输出字母表{0,1,…,k}能组成的长度为n的紧致单词占所有可能的单词数量的百分比。

[分析]

(by 陈锋)

所有的单词熟练是k^n个，我们定义DP(k, n)为以k为最后一个字符的长度为n的单词的数量。
则DP(k,n) = DP(k-1, n-1) + DP(k + 1, n-1) + DP(k, n-1)。边界是，当k越界的时候，DP=0，当n = 1的时候DP-1。这个DP的类型定义为double以避免溢出，最终所求的答案为100  `*` (∑DP(i,n) for i = 0 to k)/(k+1)<sup>n</sup>。

## UVa10157 括号表达式(Expressions) ##

[题目大意]

给定括号表达式的长度n和深度d，求合法的表达式的个数有多少个。例如（）（（））（）和（（）（（）））都是合法的表达式，前者的长度n=8，深度d=2.后者的n=8，深度d=3.

[分析]

(by 陈锋)

把最左边的"("和对应的")"看成一组分界线，它其它括号分成左右两边，左边深度<=d-1，右边深度<=d。f`[`i]`[`j]表示一共有i对括号时深度不超过j的表达式数量，则f`[`i]`[`j]=Σ`{`f`[`k][j-1]`*`f[i-k-1]`[`j]}，边界条件是i = 0时，f = 1。最终结果是f`[`n/2]`[`d]-f`[`n/2]`[`d-1]，前提是n为偶数。

## Uva10497 乱翻东西的小孩儿(Sweet Child Makes Trouble) ##

[题目大意]

给定整数排列(1,2...n)，求出有多少个这n个数的排列满足如下条件：任何一个数k都不在原来的第k个位置。

[分析]

(by 陈锋)

要把数列打乱，需要把n个数依次打乱，每一步有两种办法：1是将他和其他一个元素交换，有n-1种办法，并且变换了2个元素的位置。2是把其他一个元素放到当前元素的位置并且把当前的元素依次向后推，这样就变动了一个元素，做法有n-1中。综合2种情况，我们可以得到递推公式：f(n) = (n-1)(f(n-2) + f(n-1))。边界情况是f(2) = 1，f(1) = 0。

  * 需要注意的是

如果此题是用自己实现的高精度整数bigint，那么bigint的内部数组一定要开的够大，最大的f(800)是1997位，但是数组仅仅2000位是不够的，因为中间的乘法计算，可能用到更多位。